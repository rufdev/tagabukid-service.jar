import com.rameses.annotations.*;
import com.rameses.common.*;
import com.rameses.services.extended.*;

class TagabukidUserOrgLookupService
{

	@ActiveDB(value='userorg', em='tagabukid_etracs')
	def em

	@ActiveDB('userorg')
	def emx

	@Env
	def env;

	@Service('DateService')
	def dtSvc 

	void beforeList(params){
		if (params == null) params = [:]
		params.searchtext = (params.searchtext ? params.searchtext :'')+'%'
	}

	@ProxyMethod
	public def getList( params ) {
		beforeList(params)
		def userorg = em.getList(params)
		if(userorg){
			params.filter = "AND objid IN ('" + userorg.objid.join("','") + "')";
			def entity = emx.getEtracsUser(params)
			entity.each{ y ->
				
			}
			return entity
		}
		
		return []
	} 

}
